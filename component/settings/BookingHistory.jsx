"use client";
import React, { useState } from "react";
import { Badge } from "@/components/ui/badge";
import { useRouter } from "next/navigation";

export default function BookingHistory() {
  const [activeStatus, setActiveStatus] = useState("on-going");
  const router = useRouter();

  const bookingData = [
    {
      id: 1,
      sitterName: "Tamim",
      rating: 5,
      ratingCount: "1200",
      date: "02/09/2025",
      service: "Dog walking",
      price: "$99",
      priceType: "Per walk",
      contact: "(229) 555-0109",
      pickupTime: "10:00 AM",
      dropoffTime: "10:00 AM",
      status: "on-going",
    },
    {
      id: 2,
      sitterName: "Tamim",
      rating: 3,
      ratingCount: "1200",
      date: "02/09/2025",
      service: "Dog walking",
      price: "$99",
      priceType: "Per walk",
      contact: "(229) 555-0109",
      pickupTime: "10:00 AM",
      dropoffTime: "10:00 AM",
      status: "on-going",
    },
    {
      id: 3,
      sitterName: "Tamim",
      rating: 3,
      ratingCount: "811,200",
      date: "02/09/2025",
      service: "Dog walking",
      price: "$99",
      priceType: "Per walk",
      contact: "(229) 555-0109",
      pickupTime: "10:00 AM",
      dropoffTime: "10:00 AM",
      status: "completed",
    },
  ];

  const filteredBookings = bookingData.filter(
    (booking) => booking.status === activeStatus
  );

  const getStatusColor = (status) => {
    switch (status) {
      case "on-going":
        return "text-[#024B5E] border-b-2 border-[#024B5E] rounded-none";
      case "completed":
        return "bg-gray-200 text-[#024B5E]";
      case "cancelled":
        return "bg-red-100 text-red-700";
      case "upcoming":
        return "bg-blue-100 text-blue-700";
      default:
        return "bg-gray-200 text-[#024B5E]";
    }
  };

  const statuses = ["On going", "Upcoming", "Completed", "Cancelled"];

  return (

    <div className="bg-white rounded-lg border border-gray-200 p-4 sm:p-6 md:p-8">
      <h2 className="text-lg sm:text-xl font-semibold text-[#024B5E] mb-4 sm:mb-6">Order history</h2>

      {/* Status Tabs */}
      <div className="flex w-full gap-1 sm:gap-2 mb-4 sm:mb-8">
        {statuses.map((status) => {
          const statusKey = status.toLowerCase().replace(" ", "-");
          const isActive = activeStatus === statusKey;
          return (
            <button
              key={status}
              onClick={() => setActiveStatus(statusKey)}
              className={`flex-1 px-1 sm:px-3 py-2 rounded-md text-[9px] sm:text-sm font-medium transition-colors whitespace-nowrap text-center ${isActive
                ? "bg-[#024B5E] text-white"
                : "bg-gray-100 text-[#024B5E] hover:bg-gray-200"
                }`}
            >
              {status}
            </button>
          );
        })}
      </div>


      {/* Bookings List */}
      <div className="space-y-4">
        {filteredBookings.length > 0 ? (
          filteredBookings.map((booking) => (
            <div
              key={booking.id}
              onClick={() => router.push('/settings/ongoing')}
              className="border border-gray-200 rounded-lg p-4 sm:p-6 hover:shadow-md transition-shadow bg-white cursor-pointer"
            >
              {/* Header Row */}
              <div className="flex flex-col sm:flex-row justify-between items-start mb-4 gap-3">
                <div className="flex gap-3 items-start w-full sm:w-auto">
                  <div className="w-12 h-12 sm:w-14 sm:h-14 rounded-full shrink-0 overflow-hidden">
                    <img
                      src="/Ellipse.png"
                      alt={booking.sitterName}
                      className="w-full h-full object-cover"
                    />
                  </div>
                  <div>
                    <h3 className="font-semibold text-[#024B5E] text-base sm:text-lg">
                      {booking.sitterName}
                    </h3>
                    <div className="flex items-center gap-1 text-xs sm:text-sm">
                      <span className="text-yellow-400">â˜…</span>
                      <span className="font-medium">
                        {booking.rating}.{booking.rating > 0 ? "8" : "0"}({booking.ratingCount})
                      </span>
                    </div>
                  </div>
                </div>
                <div className="flex flex-row sm:flex-col items-center sm:items-end justify-between sm:justify-start gap-2 w-full sm:w-auto">
                  <div className="text-xs sm:text-sm font-medium bg-[#D9F5FC] text-[#024B5E] px-2 sm:px-3 py-1 rounded">
                    {booking.date}
                  </div>
                  <div className="text-xl sm:text-2xl font-semibold text-[#024B5E]">
                    {booking.price}
                    <span className="text-xs sm:text-sm text-[#024B5E] font-normal ml-1">
                      {booking.priceType}
                    </span>
                  </div>
                </div>
              </div>

              {/* Service Name */}
              <div className="text-sm sm:text-base font-semibold text-[#024B5E] mb-3">
                {booking.service}
              </div>

              {/* Contact and Date Info */}
              <div className="text-sm font-semibold text-[#024B5E] mb-2">Contact</div>

              {/* 3 Column Grid Layout */}
              <div className="grid grid-cols-1 md:grid-cols-3 gap-4 overflow-hidden">
                {/* Column 1: Contact and Date */}
                <div className="space-y-2">
                  <div className="flex items-center gap-2 text-sm text-[#024B5E]">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
                      <path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"></path>
                    </svg>
                    <span>{booking.contact}</span>
                  </div>
                  <div className="flex items-center gap-2 text-sm text-[#024B5E]">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
                      <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect>
                      <line x1="16" y1="2" x2="16" y2="6"></line>
                      <line x1="8" y1="2" x2="8" y2="6"></line>
                      <line x1="3" y1="10" x2="21" y2="10"></line>
                    </svg>
                    <span>{booking.date}</span>
                  </div>
                </div>

                {/* Column 2: Pick-up and Drop-off times */}
                <div className="space-y-2">
                  <div className="text-sm text-[#024B5E]">
                    Pick-up time: <span className="font-semibold text-[#024B5E]">{booking.pickupTime}</span>
                  </div>
                  <div className="text-sm text-[#024B5E]">
                    Drop-off time: <span className="font-semibold text-[#024B5E]">{booking.dropoffTime}</span>
                  </div>
                </div>

                {/* Column 3: Status Badge */}
                <div className="flex justify-start md:justify-end items-start">
                  <span
                    className={`px-3 sm:px-4 py-1.5 rounded-md text-xs sm:text-sm font-medium whitespace-nowrap ${getStatusColor(
                      booking.status
                    )}`}
                  >
                    {booking.status === "on-going"
                      ? "On going"
                      : booking.status.charAt(0).toUpperCase() +
                      booking.status.slice(1)}
                  </span>
                </div>
              </div>
            </div>
          ))
        ) : (
          <div className="text-center py-12">
            <p className="text-[#024B5E]">No bookings found for this status.</p>
          </div>
        )}
      </div>
    </div>
  );
}
